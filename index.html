<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora de Metas Inmobiliarias</title>
<style>*{margin:0;padding:0;box-sizing:border-box}:root{--primary-color:#2563eb;--primary-dark:#1e40af;--secondary-color:#64748b;--success-color:#10b981;--warning-color:#f59e0b;--danger-color:#ef4444;--bg-color:#f8fafc;--card-bg:#ffffff;--text-primary:#1e293b;--text-secondary:#64748b;--border-color:#e2e8f0;--shadow-sm:0 1px 2px 0 rgb(0 0 0 / 0.05);--shadow-md:0 4px 6px -1px rgb(0 0 0 / 0.1);--shadow-lg:0 10px 15px -3px rgb(0 0 0 / 0.1)}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;background:var(--bg-color);color:var(--text-primary);line-height:1.6;min-height:100vh}.container{max-width:800px;margin:0 auto;padding:20px}.screen{display:none}.screen.active{display:block;animation:fadeIn 0.3s ease-in}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.hero{text-align:center;padding:60px 20px}.hero h1{font-size:2.5rem;font-weight:700;color:var(--text-primary);margin-bottom:16px;line-height:1.2}.subtitle{font-size:1.25rem;color:var(--text-secondary);margin-bottom:48px;max-width:600px;margin-left:auto;margin-right:auto}.features{display:grid;gap:24px;margin-bottom:48px;text-align:left}.feature{background:var(--card-bg);padding:24px;border-radius:12px;box-shadow:var(--shadow-sm);border:1px solid var(--border-color);display:flex;align-items:center;gap:16px}.feature .icon{font-size:2rem;flex-shrink:0}.feature p{color:var(--text-secondary);margin:0}.btn-primary,.btn-secondary{padding:14px 32px;border-radius:8px;border:none;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.2s ease;font-family:inherit}.btn-primary{background:var(--primary-color);color:white}.btn-primary:hover{background:var(--primary-dark);transform:translateY(-1px);box-shadow:var(--shadow-md)}.btn-secondary{background:transparent;color:var(--text-secondary);border:1px solid var(--border-color)}.btn-secondary:hover{background:var(--bg-color);border-color:var(--secondary-color)}.btn-primary:disabled,.btn-secondary:disabled{opacity:0.5;cursor:not-allowed}.progress-bar{height:4px;background:var(--border-color);border-radius:2px;margin-bottom:40px;overflow:hidden}.progress-fill{height:100%;background:var(--primary-color);transition:width 0.3s ease;width:0%}.step{display:none;background:var(--card-bg);padding:40px;border-radius:12px;box-shadow:var(--shadow-md);border:1px solid var(--border-color)}.step.active{display:block;animation:fadeIn 0.3s ease-in}.step h2{font-size:1.75rem;margin-bottom:8px;color:var(--text-primary)}.step-description{color:var(--text-secondary);margin-bottom:32px}.input-group{margin-bottom:24px}.input-group label{display:block;font-weight:600;margin-bottom:8px;color:var(--text-primary)}.input-group input{width:100%;padding:12px 16px;border:1px solid var(--border-color);border-radius:8px;font-size:1rem;font-family:inherit;transition:border-color 0.2s ease;line-height:1.6}.input-group.currency{position:relative}.input-group.currency::before{content:'U$S';position:absolute;left:16px;bottom:13px;color:var(--text-secondary);font-weight:600;font-size:1rem;pointer-events:none;line-height:1.6}.input-group.currency input{padding-left:60px}.input-group input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px rgba(37,99,235,0.1)}.input-hint{display:block;font-size:0.875rem;color:var(--text-secondary);margin-top:6px}.button-group{display:flex;gap:12px;margin-top:32px;justify-content:space-between}.choice-group{display:grid;gap:16px;margin-bottom:32px}.choice-btn{background:var(--card-bg);border:2px solid var(--border-color);border-radius:12px;padding:24px;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;gap:16px;font-size:1rem;font-family:inherit;text-align:left;width:100%}.choice-btn:hover{border-color:var(--primary-color);background:rgba(37,99,235,0.05)}.choice-icon{font-size:1.5rem;width:40px;height:40px;background:var(--bg-color);border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.choice-text{font-weight:600;color:var(--text-primary)}.results-header{text-align:center;margin-bottom:48px}.results-header h1{font-size:2.25rem;margin-bottom:8px}.results-subtitle{color:var(--text-secondary);font-size:1.125rem}.results-subtitle span{color:var(--primary-color);font-weight:700}.precision-badge{display:inline-block;padding:6px 16px;border-radius:20px;font-size:0.875rem;font-weight:600;margin-top:12px}.precision-badge.low{background:#fef3c7;color:#92400e}.precision-badge.medium{background:#dbeafe;color:#1e40af}.precision-badge.high{background:#d1fae5;color:#065f46}.results-section{background:var(--card-bg);padding:32px;border-radius:12px;box-shadow:var(--shadow-sm);border:1px solid var(--border-color);margin-bottom:24px}.results-section h2{font-size:1.5rem;margin-bottom:24px;color:var(--text-primary)}.section-note{color:var(--text-secondary);font-size:0.95rem;margin-bottom:24px}.funnel{display:flex;flex-direction:column;gap:8px}.funnel-item{background:var(--bg-color);padding:20px;border-radius:8px;display:flex;justify-content:space-between;align-items:center;border:1px solid var(--border-color)}.funnel-item.highlight{background:rgba(37,99,235,0.1);border-color:var(--primary-color)}.funnel-label{font-weight:600;color:var(--text-primary)}.funnel-value{font-size:1.5rem;font-weight:700;color:var(--primary-color)}.funnel-arrow{text-align:center;color:var(--text-secondary);font-size:1.5rem}.goals-grid{display:grid;gap:20px}.goal-card{background:var(--bg-color);padding:24px;border-radius:8px;border:1px solid var(--border-color)}.goal-card.highlight-card{background:rgba(37,99,235,0.05);border:2px solid var(--primary-color)}.goal-card h3{font-size:1.125rem;margin-bottom:16px;color:var(--text-primary)}.goal-item{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--border-color)}.goal-item:last-child{border-bottom:none}.goal-item span{color:var(--text-secondary)}.goal-item strong{color:var(--text-primary);font-size:1.125rem}.quarters-grid{display:grid;gap:16px}.quarter-card{background:var(--bg-color);padding:20px;border-radius:8px;border:1px solid var(--border-color);display:flex;justify-content:space-between;align-items:center}.quarter-info h4{font-size:1rem;margin-bottom:4px}.quarter-info p{font-size:0.875rem;color:var(--text-secondary)}.quarter-value{text-align:right}.quarter-percentage{font-size:0.875rem;color:var(--text-secondary);margin-bottom:4px}.quarter-amount{font-size:1.25rem;font-weight:700;color:var(--primary-color)}.ratios-list{display:grid;gap:12px}.ratio-item{background:var(--bg-color);padding:16px;border-radius:8px;display:flex;justify-content:space-between;align-items:center;border:1px solid var(--border-color)}.ratio-label{color:var(--text-primary);font-weight:500}.ratio-value{font-weight:700;color:var(--primary-color)}.ratio-source{font-size:0.875rem;color:var(--text-secondary)}.results-actions{margin-top:48px;text-align:center}@media (min-width:768px){.hero h1{font-size:3rem}.goals-grid{grid-template-columns:repeat(3,1fr)}.quarters-grid{grid-template-columns:repeat(2,1fr)}.button-group{justify-content:flex-end}.button-group .btn-secondary{margin-right:auto}}@media (max-width:767px){.container{padding:12px}.hero{padding:40px 12px}.hero h1{font-size:2rem}.step{padding:24px}.results-section{padding:20px}}</style>
</head>
<body>
<div class="container">
<div id="landing" class="screen active">
<div class="hero">
<h1>Planific√° tus metas inmobiliarias con precisi√≥n</h1>
<p class="subtitle">Calcul√° cu√°ntos contactos y reuniones necesit√°s hacer para alcanzar tu objetivo de facturaci√≥n anual.</p>
<div class="features">
<div class="feature"><span class="icon">üìä</span><p>Modelo probabil√≠stico basado en tu embudo de ventas</p></div>
<div class="feature"><span class="icon">üéØ</span><p>Metas diarias, semanales y mensuales claras</p></div>
<div class="feature"><span class="icon">üìà</span><p>Usa tus datos o valores est√°ndar conservadores</p></div>
</div>
<button class="btn-primary" onclick="app.init()">Comenzar</button>
</div>
</div>
<div id="onboarding" class="screen">
<div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
<div class="step active" data-step="1">
<h2>¬øCu√°l es tu objetivo de facturaci√≥n anual?</h2>
<p class="step-description">Ingres√° cu√°nto quer√©s facturar en USD durante el a√±o.</p>
<div class="input-group currency"><label>Objetivo anual</label><input type="text" id="objetivoAnual" placeholder="100.000" inputmode="numeric"></div>
<div class="button-group"><button class="btn-secondary" onclick="app.back()">Volver</button><button class="btn-primary" onclick="app.next()">Continuar</button></div>
</div>
<div class="step" data-step="2">
<h2>¬øCu√°l es tu ticket promedio?</h2>
<p class="step-description">El valor promedio de las operaciones que cerr√°s (precio de venta o alquiler seg√∫n corresponda).</p>
<div class="input-group currency"><label>Ticket promedio</label><input type="text" id="ticketPromedio" placeholder="150.000" inputmode="numeric"></div>
<div class="button-group"><button class="btn-secondary" onclick="app.prev()">Atr√°s</button><button class="btn-primary" onclick="app.next()">Continuar</button></div>
</div>
<div class="step" data-step="3">
<h2>¬øQu√© comisi√≥n cobr√°s?</h2>
<p class="step-description">El porcentaje que te llev√°s de cada operaci√≥n cerrada.</p>
<div class="input-group"><label>Comisi√≥n (%)</label><input type="text" id="comision" placeholder="3" value="3" inputmode="decimal"><span class="input-hint">Valor recomendado: 3%</span></div>
<div class="button-group"><button class="btn-secondary" onclick="app.prev()">Atr√°s</button><button class="btn-primary" onclick="app.next()">Continuar</button></div>
</div>
<div class="step" data-step="4">
<h2>¬øCu√°ntos meses productivos trabaj√°s al a√±o?</h2>
<p class="step-description">Rest√° vacaciones y meses de baja actividad.</p>
<div class="input-group"><label>Meses productivos</label><input type="text" id="mesesProductivos" placeholder="11" value="11" inputmode="numeric"><span class="input-hint">Valor recomendado: 11 meses</span></div>
<div class="button-group"><button class="btn-secondary" onclick="app.prev()">Atr√°s</button><button class="btn-primary" onclick="app.next()">Continuar</button></div>
</div>
<div class="step" data-step="5">
<h2>¬øTen√©s datos del √∫ltimo a√±o?</h2>
<p class="step-description">Si med√≠s tus resultados, podemos personalizar el c√°lculo. Si no, usaremos valores est√°ndar conservadores.</p>
<div class="choice-group">
<button class="choice-btn" onclick="app.choice(true)"><span class="choice-icon">‚úì</span><span class="choice-text">S√≠, tengo datos</span></button>
<button class="choice-btn" onclick="app.choice(false)"><span class="choice-icon">‚äò</span><span class="choice-text">No, usar valores est√°ndar</span></button>
</div>
<div class="button-group"><button class="btn-secondary" onclick="app.prev()">Atr√°s</button></div>
</div>
<div class="step" data-step="6">
<h2>Ingres√° tus datos del √∫ltimo a√±o</h2>
<p class="step-description">Con esto personalizamos las tasas de conversi√≥n seg√∫n tu desempe√±o real.</p>
<div class="input-group"><label>Cierres del √∫ltimo a√±o</label><input type="text" id="cierresHistoricos" placeholder="10" inputmode="numeric"><span class="input-hint">Operaciones cerradas</span></div>
<div class="input-group currency"><label>Facturaci√≥n del √∫ltimo a√±o</label><input type="text" id="facturacionHistorica" placeholder="50.000" inputmode="numeric"></div>
<div class="input-group"><label>Captaciones del √∫ltimo a√±o (opcional)</label><input type="text" id="captacionesHistoricas" placeholder="15" inputmode="numeric"><span class="input-hint">Propiedades tomadas o contratos firmados</span></div>
<div class="input-group">
<label>RVF del √∫ltimo a√±o (opcional)</label>
<input type="text" id="rvfHistoricas" placeholder="50" inputmode="numeric">
<span class="input-hint"><strong>RVF - Reuni√≥n Verde Fundacional:</strong> Conversaci√≥n 1 a 1 para entender la situaci√≥n inmobiliaria de una persona. Si no med√≠s RVF, pod√©s usar prelisting + prebuying.</span>
</div>
<div class="input-group"><label>Contactos calificados del √∫ltimo a√±o (opcional)</label><input type="text" id="contactosHistoricos" placeholder="1.250" inputmode="numeric"><span class="input-hint"><strong>Contacto calificado:</strong> Intento v√°lido de conversaci√≥n 1 a 1 (WhatsApp, DM o llamada) con una persona real. Vos control√°s la acci√≥n, no el resultado.</span></div>
<div class="button-group"><button class="btn-secondary" onclick="app.prev()">Atr√°s</button><button class="btn-primary" onclick="app.calc()">Calcular mi plan</button></div>
</div>
</div>
<div id="results" class="screen">
<div class="results-header">
<h1>Tu Plan de Acci√≥n</h1>
<p class="results-subtitle">Basado en tu objetivo de <span id="resultObjetivo"></span> USD anuales</p>
<div class="precision-badge" id="precisionBadge"></div>
</div>
<div class="results-content">
<section class="results-section">
<h2>Tu Embudo Anual</h2>
<div class="funnel">
<div class="funnel-item"><span class="funnel-label">Contactos Calificados</span><span class="funnel-value" id="embudoContactos">-</span></div>
<div class="funnel-arrow">‚Üì</div>
<div class="funnel-item"><span class="funnel-label">RVF (Reuniones)</span><span class="funnel-value" id="embudoRVF">-</span></div>
<div class="funnel-arrow">‚Üì</div>
<div class="funnel-item"><span class="funnel-label">Captaciones</span><span class="funnel-value" id="embudoCaptaciones">-</span></div>
<div class="funnel-arrow">‚Üì</div>
<div class="funnel-item"><span class="funnel-label">Cierres</span><span class="funnel-value" id="embudoCierres">-</span></div>
<div class="funnel-arrow">‚Üì</div>
<div class="funnel-item highlight"><span class="funnel-label">Facturaci√≥n</span><span class="funnel-value" id="embudoFacturacion">-</span></div>
</div>
</section>
<section class="results-section">
<h2>Tus Metas de Actividad</h2>
<p class="section-note">Enfocate en lo que pod√©s controlar: los contactos y las RVF semanales.</p>
<div class="goals-grid">
<div class="goal-card"><h3>Por Mes Productivo</h3><div class="goal-item"><span>Contactos:</span><strong id="metaContactosMes">-</strong></div><div class="goal-item"><span>RVF:</span><strong id="metaRVFMes">-</strong></div></div>
<div class="goal-card highlight-card"><h3>Por Semana</h3><div class="goal-item"><span>Contactos:</span><strong id="metaContactosSemana">-</strong></div><div class="goal-item"><span>RVF:</span><strong id="metaRVFSemana">-</strong></div></div>
<div class="goal-card"><h3>Referencia Diaria</h3><div class="goal-item"><span>Contactos:</span><strong id="metaContactosDia">-</strong></div><div class="goal-item"><span>RVF:</span><strong style="color:var(--text-secondary);font-size:1rem">‚âà <span id="metaRVFDia">-</span></strong></div></div>
</div>
</section>
<section class="results-section">
<h2>Distribuci√≥n por Trimestre (Estacionalidad)</h2>
<p class="section-note">El mercado inmobiliario tiene estacionalidad natural. Distribu√≠ tu esfuerzo seg√∫n estas recomendaciones:</p>
<div class="quarters-grid" id="quartersGrid"></div>
</section>
<section class="results-section">
<h2>Tasas de Conversi√≥n (Inputs Controlables)</h2>
<p class="section-note">Si cumpl√≠s con tu parte del trabajo, el resto es estad√≠stica.</p>
<div class="ratios-list" id="ratiosList"></div>
</section>
</div>
<div class="results-actions"><button class="btn-secondary" onclick="app.back()">Calcular otro plan</button></div>
</div>
</div>
<script>
document.addEventListener('DOMContentLoaded',function(){document.addEventListener('keypress',function(e){if(e.key==='Enter'){e.preventDefault();const active=document.querySelector('.screen.active');if(active&&active.id==='landing'){app.init()}else if(active&&active.id==='onboarding'){const currentStep=document.querySelector('.step.active');const stepNum=parseInt(currentStep.getAttribute('data-step'));if(stepNum>=1&&stepNum<=4){app.next()}else if(stepNum===6){app.calc()}}}});document.querySelectorAll('input[type="text"]').forEach(inp=>{inp.addEventListener('input',function(e){let cursorPos=e.target.selectionStart;let oldLen=e.target.value.length;let val=e.target.value.replace(/[^\d.,]/g,'').replace(/[.,]/g,'');if(val){let formatted=val.replace(/\B(?=(\d{3})+(?!\d))/g,'.');let newLen=formatted.length;let diff=newLen-oldLen;e.target.value=formatted;e.target.setAttribute('data-value',val);e.target.setSelectionRange(cursorPos+diff,cursorPos+diff)}else{e.target.value='';e.target.setAttribute('data-value','')}});inp.addEventListener('keydown',function(e){const allowedKeys=['Backspace','Delete','Tab','ArrowLeft','ArrowRight','ArrowUp','ArrowDown'];if(!allowedKeys.includes(e.key)&&!/^\d$/.test(e.key)&&!e.ctrlKey&&!e.metaKey){e.preventDefault()}})})});
const app=function(){let s=1,u={obj:0,tick:0,com:3,mes:11,has:!1,hist:{z:0,f:0,k:0,r:0,c:0}};const d={r1:.04,r2:.3,r3:1},e={Q1:{w:.2,n:"Q1 (Ene-Mar)",d:"Arranque lento"},Q2:{w:.25,n:"Q2 (Abr-Jun)",d:"Activaci√≥n"},Q3:{w:.25,n:"Q3 (Jul-Sep)",d:"Alta temporada"},Q4:{w:.3,n:"Q4 (Oct-Dic)",d:"Cierre fuerte"}};function scr(i){document.querySelectorAll('.screen').forEach(x=>x.classList.remove('active'));document.getElementById(i).classList.add('active')}function stp(i){document.querySelectorAll('.step').forEach(x=>x.classList.remove('active'));const el=document.querySelector(`.step[data-step="${i}"]`);if(el){el.classList.add('active');setTimeout(()=>{const inp=el.querySelector('input[type="text"]');if(inp)inp.focus()},100)}}function prog(){const t=u.has?6:5,p=(s/t)*100;document.getElementById('progressFill').style.width=`${p}%`}function val(){let ok=!0,msg='';switch(s){case 1:const o=parseFloat((document.getElementById('objetivoAnual').getAttribute('data-value')||document.getElementById('objetivoAnual').value).replace(/\./g,''));if(!o||o<1e3){msg='Por favor ingres√° un objetivo v√°lido (m√≠nimo USD 1,000)';ok=!1}break;case 2:const tk=parseFloat((document.getElementById('ticketPromedio').getAttribute('data-value')||document.getElementById('ticketPromedio').value).replace(/\./g,''));if(!tk||tk<1e3){msg='Por favor ingres√° un ticket promedio v√°lido (m√≠nimo USD 1,000)';ok=!1}break;case 3:const cm=parseFloat((document.getElementById('comision').getAttribute('data-value')||document.getElementById('comision').value).replace(/\./g,''));if(!cm||cm<=0||cm>100){msg='Por favor ingres√° una comisi√≥n v√°lida (entre 0.1% y 100%)';ok=!1}break;case 4:const ms=parseInt((document.getElementById('mesesProductivos').getAttribute('data-value')||document.getElementById('mesesProductivos').value).replace(/\./g,''));if(!ms||ms<1||ms>12){msg='Por favor ingres√° meses productivos v√°lidos (entre 1 y 12)';ok=!1}break;case 6:const z=parseInt((document.getElementById('cierresHistoricos').getAttribute('data-value')||document.getElementById('cierresHistoricos').value).replace(/\./g,'')),f=parseFloat((document.getElementById('facturacionHistorica').getAttribute('data-value')||document.getElementById('facturacionHistorica').value).replace(/\./g,''));if(!z||z<1){msg='Por favor ingres√° la cantidad de cierres del √∫ltimo a√±o';ok=!1}else if(!f||f<1e3){msg='Por favor ingres√° la facturaci√≥n del √∫ltimo a√±o';ok=!1}break}!ok&&msg&&alert(msg);return ok}function save(){switch(s){case 1:u.obj=parseFloat((document.getElementById('objetivoAnual').getAttribute('data-value')||document.getElementById('objetivoAnual').value).replace(/\./g,''));break;case 2:u.tick=parseFloat((document.getElementById('ticketPromedio').getAttribute('data-value')||document.getElementById('ticketPromedio').value).replace(/\./g,''));break;case 3:u.com=parseFloat((document.getElementById('comision').getAttribute('data-value')||document.getElementById('comision').value).replace(/\./g,''));break;case 4:u.mes=parseInt((document.getElementById('mesesProductivos').getAttribute('data-value')||document.getElementById('mesesProductivos').value).replace(/\./g,''));break;case 6:u.hist.z=parseInt((document.getElementById('cierresHistoricos').getAttribute('data-value')||document.getElementById('cierresHistoricos').value).replace(/\./g,''))||0;u.hist.f=parseFloat((document.getElementById('facturacionHistorica').getAttribute('data-value')||document.getElementById('facturacionHistorica').value).replace(/\./g,''))||0;u.hist.k=parseInt((document.getElementById('captacionesHistoricas').getAttribute('data-value')||document.getElementById('captacionesHistoricas').value).replace(/\./g,''))||0;u.hist.r=parseInt((document.getElementById('rvfHistoricas').getAttribute('data-value')||document.getElementById('rvfHistoricas').value).replace(/\./g,''))||0;u.hist.c=parseInt((document.getElementById('contactosHistoricos').getAttribute('data-value')||document.getElementById('contactosHistoricos').value).replace(/\./g,''))||0;break}}function getRat(){const rat={r1:d.r1,r2:d.r2,r3:d.r3,src:{r1:'default',r2:'default',r3:'default'}};if(!u.has)return rat;const h=u.hist;if(h.z>0&&h.k>0){rat.r3=h.z/h.k;rat.src.r3='personalizado'}if(h.k>0&&h.r>0){rat.r2=h.k/h.r;rat.src.r2='personalizado'}if(h.r>0&&h.c>0){rat.r1=h.r/h.c;rat.src.r1='personalizado'}return rat}function getMet(C,R,K,Z,F){const m=u.mes,w=4;return{mes:{contactos:Math.ceil(C/m),rvf:Math.ceil(R/m),captaciones:Math.ceil(K/m),cierres:Math.ceil(Z/m),facturacion:Math.round(F/m)},semana:{contactos:Math.ceil(C/(m*w)),rvf:Math.ceil(R/(m*w))},dia:{contactos:Math.ceil(C/(m*w*5)),rvf:(R/(m*w*5)).toFixed(1)}}}function getQ(obj,z){const qs=[];for(const[key,data]of Object.entries(e)){qs.push({nombre:data.n,descripcion:data.d,peso:data.w,facturacion:Math.round(obj*data.w),cierres:Math.ceil(z*data.w)})}return qs}function getPrec(){if(!u.has)return'low';const h=u.hist;let sc=0;if(h.z>0&&h.f>0)sc++;if(h.k>0)sc++;if(h.r>0)sc++;if(h.c>0)sc++;return sc>=4?'high':sc>=2?'medium':'low'}function fmt(n){return new Intl.NumberFormat('es-AR').format(Math.round(n))}function showRes(res){document.getElementById('resultObjetivo').textContent=fmt(u.obj);const pb=document.getElementById('precisionBadge'),ptxt={low:'Precisi√≥n: Supuestos conservadores hasta que cargues datos',medium:'Precisi√≥n: Mezcla de datos propios y estimados',high:'Precisi√≥n: Mayormente basado en tu hist√≥rico'};pb.textContent=ptxt[res.prec];pb.className=`precision-badge ${res.prec}`;document.getElementById('embudoContactos').textContent=fmt(res.emb.C);document.getElementById('embudoRVF').textContent=fmt(res.emb.R);document.getElementById('embudoCaptaciones').textContent=fmt(res.emb.K);document.getElementById('embudoCierres').textContent=fmt(res.emb.Z);document.getElementById('embudoFacturacion').textContent=`USD ${fmt(res.emb.F)}`;document.getElementById('metaContactosMes').textContent=fmt(res.met.mes.contactos);document.getElementById('metaRVFMes').textContent=fmt(res.met.mes.rvf);document.getElementById('metaContactosSemana').textContent=fmt(res.met.semana.contactos);document.getElementById('metaRVFSemana').textContent=fmt(res.met.semana.rvf);document.getElementById('metaContactosDia').textContent=fmt(res.met.dia.contactos);document.getElementById('metaRVFDia').textContent=res.met.dia.rvf;showQ(res.tri);showRat(res.rat)}function showQ(tri){const cont=document.getElementById('quartersGrid');cont.innerHTML='';tri.forEach(q=>{const card=document.createElement('div');card.className='quarter-card';card.innerHTML=`<div class="quarter-info"><h4>${q.nombre}</h4><p>${q.descripcion}</p></div><div class="quarter-value"><div class="quarter-percentage">${(q.peso*100).toFixed(0)}% del objetivo</div><div class="quarter-amount">USD ${fmt(q.facturacion)}</div></div>`;cont.appendChild(card)})}function showRat(rat){const cont=document.getElementById('ratiosList');cont.innerHTML='';const rd=[{label:'Contacto ‚Üí RVF',value:`${(rat.r1*100).toFixed(1)}%`,source:rat.src.r1},{label:'RVF ‚Üí Captaci√≥n',value:`${(rat.r2*100).toFixed(1)}%`,source:rat.src.r2}];rd.forEach(r=>{const it=document.createElement('div');it.className='ratio-item';it.innerHTML=`<div><div class="ratio-label">${r.label}</div><div class="ratio-source">${r.source==='personalizado'?'‚úì Basado en tus datos':'Supuesto inicial conservador'}</div></div><div class="ratio-value">${r.value}</div>`;cont.appendChild(it)})}function rst(){s=1;u={obj:0,tick:0,com:3,mes:11,has:!1,hist:{z:0,f:0,k:0,r:0,c:0}};document.querySelectorAll('input').forEach(inp=>{if(inp.id==='comision')inp.value='3';else if(inp.id==='mesesProductivos')inp.value='11';else inp.value=''})}return{init(){scr('onboarding');s=1;stp(1);prog()},back(){rst();scr('landing')},next(){if(!val())return;save();if(s===5&&!u.has){this.calc();return}s++;stp(s);prog()},prev(){if(s===6&&!u.has)s=5;else s--;stp(s);prog()},choice(hasData){u.has=hasData;if(u.has){s=6;stp(6)}else{this.calc()}prog()},calc(){save();const M=u.tick*(u.com/100),Z=Math.ceil(u.obj/M),rat=getRat(),K=Math.ceil(Z/rat.r3),R=Math.ceil(K/rat.r2),C=Math.ceil(R/rat.r1),F=Z*M,met=getMet(C,R,K,Z,F),tri=getQ(u.obj,Z),prec=getPrec();showRes({emb:{C,R,K,Z,F},met,tri,rat,prec});scr('results')}}}();
</script>
</body>
</html>